{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "schema/types.schema.json",
  "definitions": {
    "investigator": {
      "$id": "#investigator",
      "title": "InvestigatorSelector",
      "type": "string",
      "enum": [
        "lead_investigator",
        "all",
        "any",
        "choice",
        "defeated",
        "input_value"
      ]
    },
    "chaosToken": {
      "$id": "#chaosToken",
      "title": "ChaosToken",
      "type": "string",
      "enum": [
        "+1",
        "0",
        "-1",
        "-2",
        "-3",
        "-4",
        "-5",
        "-6",
        "-7",
        "-8",
        "skull",
        "cultist",
        "tablet",
        "elder_thing",
        "elder_sign",
        "auto_fail"
      ]
    },
    "cardQuery": {
      "$id": "#cardQuery",
      "title": "CardQuery",
      "type": "object",
      "properties": {
        "trait": {
          "type": "string"
        },
        "unique": {
          "type": "boolean"
        },
        "vengeance": {
          "type": "boolean"
        },
        "code": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    },
    "stepsChoice": {
      "$id": "#stepsChoice",
      "title": "StepsChoice",
      "type": "object",
      "properties": {
        "text": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "steps": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "effects": {
          "type": "null"
        },
        "resolution": {
          "type": "null"
        }
      },
      "required": ["text", "steps"],
      "additionalProperties": false
    },
    "effectsChoice": {
      "$id": "#effectsChoice",
      "title": "EffectsChoice",
      "type": "object",
      "properties": {
        "text": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "effects": {
          "type": "array",
          "items": {
            "$ref": "effect.schema.json#/definitions/effect"
          }
        },
        "steps": {
          "type": "null"
        },
        "resolution": {
          "type": "null"
        }
      },
      "required": ["text", "effects"],
      "additionalProperties": false
    },
    "resolutionChoice": {
      "$id": "#resolutionChoice",
      "title": "ResolutionChoice",
      "type": "object",
      "properties": {
        "text": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "resolution": {
          "type": "string"
        },
        "steps": {
          "type": "null"
        },
        "effects": {
          "type": "null"
        }
      },
      "required": ["text", "resolution"],
      "additionalProperties": false
    },
    "choice": {
      "$id": "#step",
      "title": "Choice",
      "oneOf": [
        {
          "$ref": "#/definitions/stepsChoice"
        },
        {
          "$ref": "#/definitions/effectsChoice"
        },
        {
          "$ref": "#/definitions/resolutionChoice"
        }
      ]
    }
  }
}
