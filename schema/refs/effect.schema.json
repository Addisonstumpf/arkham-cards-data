{
  "$schema": "http://json-schema.org/schema#",
  "$id": "schema/effect.schema.json",
  "definitions": {
    "storyStepEffect": {
      "$id": "#storyStepEffect",
      "title": "StoryStepEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "story_step"
          ]
        },
        "steps": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "type",
        "steps"
      ],
      "additionalProperties": false
    },
    "earnXpEffect": {
      "$id": "#earnXpEffect",
      "title": "EarnXpEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "earn_xp"
          ]
        },
        "investigator": {
          "$ref": "types.schema.json#/definitions/investigator"
        },
        "bonus": {
          "type": "number"
        }
      },
      "required": [
        "type",
        "investigator"
      ],
      "additionalProperties": false
    },
    "addCardEffect": {
      "$id": "#addCardEffect",
      "title": "AddCardEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "add_card"
          ]
        },
        "investigator": {
          "$ref": "types.schema.json#/definitions/investigator"
        },
        "card": {
          "type": "string"
        },
        "required": {
          "type": "boolean"
        },
        "weakness_traits": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "ignore_deck_limit": {
          "type": "boolean"
        }
      },
      "required": [
        "type",
        "investigator",
        "card"
      ],
      "additionalProperties": false
    },
    "replaceCardEffect": {
      "$id": "#replaceCardEffect",
      "title": "ReplaceCardEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "replace_card"
          ]
        },
        "old_card": {
          "type": "string"
        },
        "new_card": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "old_card",
        "new_card"
      ],
      "additionalProperties": false
    },
    "campaignDataResultEffect": {
      "$id": "#campaignDataResultEffect",
      "title": "CampaignDataResultEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_data"
          ]
        },
        "setting": {
          "type": "string",
          "enum": [
            "result"
          ]
        },
        "value": {
          "type": "string",
          "enum": [
            "win",
            "lose"
          ]
        }
      },
      "required": [
        "type",
        "setting",
        "value"
      ],
      "additionalProperties": false
    },
    "campaignDataDifficultyEffect": {
      "$id": "#campaignDataDifficultyEffect",
      "title": "CampaignDataDifficultyEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_data"
          ]
        },
        "setting": {
          "type": "string",
          "enum": [
            "difficulty"
          ]
        },
        "value": {
          "type": "string",
          "enum": [
            "easy",
            "standard",
            "hard",
            "expert"
          ]
        }
      },
      "required": [
        "type",
        "setting",
        "value"
      ],
      "additionalProperties": false
    },
    "scenarioDataEffect": {
      "$id": "#scenarioDataEffect",
      "title": "ScenarioDataEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "scenario_data"
          ]
        },
        "setting": {
          "type": "string",
          "enum": [
            "investigator_status",
            "lead_investigator"
          ]
        },
        "investigator": {
          "$ref": "types.schema.json#/definitions/investigator"
        },
        "investigator_status": {
          "type": "string",
          "enum": [
            "alive",
            "resigned",
            "physical",
            "mental",
            "eliminated"
          ]
        }
      },
      "required": [
        "type",
        "setting",
        "investigator"
      ],
      "additionalProperties": false
    },

    "campaignDataNextScenarioEffect": {
      "$id": "#campaignDataNextScenarioEffect",
      "title": "CampaignDataNextScenarioEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_data"
          ]
        },
        "setting": {
          "type": "string",
          "enum": [
            "next_scenario",
            "skip_scenario",
            "replay_scenario"
          ]
        },
        "scenario": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "setting",
        "scenario"
      ],
      "additionalProperties": false
    },
    "campaignDataChooseInvestigatorsEffect": {
      "$id": "#campaignDataChooseInvestigatorsEffect",
      "title": "CampaignDataChooseInvestigatorsEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_data"
          ]
        },
        "setting": {
          "type": "string",
          "enum": [
            "choose_investigators"
          ]
        }
      },
      "required": [
        "type",
        "setting"
      ],
      "additionalProperties": false
    },
    "addRemoveChaosTokenEffect": {
      "$id": "#addRemoveChaosTokenEffect",
      "title": "AddRemoveChaosTokenEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "add_chaos_token",
            "remove_chaos_token"
          ]
        },
        "tokens": {
          "type": "array",
          "items": {
            "$ref": "types.schema.json#/definitions/chaosToken"
          }
        }
      },
      "required": [
        "type",
        "tokens"
      ],
      "additionalProperties": false
    },
    "campaignLogCountEffect": {
      "$id": "#campaignLogCountEffect",
      "title": "CampaignLogCountEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_log_count"
          ]
        },
        "section": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "operation": {
          "type": "string",
          "enum": [
            "set_input",
            "set",
            "add_input",
            "add"
          ]
        },
        "value": {
          "type": "number"
        },
        "text": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "section",
        "operation"
      ],
      "additionalProperties": false
    },
    "campaignLogEffect": {
      "$id": "#campaignLogEffect",
      "title": "CampaignLogEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_log"
          ]
        },
        "section": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "text": {
          "type": "string"
        },
        "cross_out": {
          "type": "boolean"
        }
      },
      "required": [
        "type",
        "section",
        "id"
      ],
      "additionalProperties": false
    },

    "campaignLogCardsEffect": {
      "$id": "#campaignLogCardsEffect",
      "title": "CampaignLogCardsEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_log_cards"
          ]
        },
        "section": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "text": {
          "type": "string"
        },
        "cards": {
          "type": "string",
          "enum": [
            "$lead_investigator",
            "$input_value"
          ]
        },
        "cross_out": {
          "type": "boolean"
        }
      },
      "required": [
        "type",
        "section"
      ],
      "additionalProperties": false
    },
    "removeCardEffect": {
      "$id": "#removeCardEffect",
      "title": "RemoveCardEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "remove_card"
          ]
        },
        "investigator": {
          "type": "string",
          "enum": [
            "choice",
            "$input_value"
          ]
        },
        "card": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "card"
      ],
      "additionalProperties": false
    },
    "traumaEffect": {
      "$id": "#traumaEffect",
      "title": "TraumaEffect",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "trauma"
          ]
        },
        "investigator": {
          "type": "string",
          "enum": [
            "all",
            "lead_investigator",
            "defeated",
            "not_resigned",
            "$input_value"
          ]
        },
        "mental": {
          "type": "number"
        },
        "physical": {
          "type": "number"
        },
        "mental_or_physical": {
          "type": "number"
        },
        "killed": {
          "type": "boolean"
        },
        "insane": {
          "type": "boolean"
        }
      },
      "required": [
        "type",
        "investigator"
      ],
      "additionalProperties": false
    },
    "effect": {
      "$id": "#effect",
      "title": "Effect",
      "oneOf": [
        { "$ref": "#/definitions/storyStepEffect" },
        { "$ref": "#/definitions/earnXpEffect" },
        { "$ref": "#/definitions/addCardEffect" },
        { "$ref": "#/definitions/removeCardEffect" },
        { "$ref": "#/definitions/replaceCardEffect" },
        { "$ref": "#/definitions/traumaEffect" },
        { "$ref": "#/definitions/campaignLogEffect" },
        { "$ref": "#/definitions/campaignLogCardsEffect" },
        { "$ref": "#/definitions/campaignLogCountEffect" },
        { "$ref": "#/definitions/campaignDataResultEffect" },
        { "$ref": "#/definitions/campaignDataDifficultyEffect" },
        { "$ref": "#/definitions/campaignDataNextScenarioEffect" },
        { "$ref": "#/definitions/campaignDataChooseInvestigatorsEffect" },
        { "$ref": "#/definitions/scenarioDataEffect" },
        { "$ref": "#/definitions/addRemoveChaosTokenEffect" }
      ]
    }
  }
}
