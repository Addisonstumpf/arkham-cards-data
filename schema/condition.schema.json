{
  "$schema": "http://json-schema.org/draft-07/schema#", 
  "$id": "schema/condition.schema.json",
  "definitions": {    
    "traumaCondition": {
      "$id": "#traumaCondition",
      "title": "TraumaCondition",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "trauma"
          ]
        },          
        "investigator": {
          "$ref": "types.schema.json#/definitions/investigator"
        },
        "trauma": {
          "type": "string",
          "enum": ["killed"]
        }
      },
      "required": [
        "type",
        "investigator",
        "trauma"
      ],
      "additionalProperties": false
    },
    "scenarioDataCondition": {
      "$id": "#scenarioDataCondition",
      "title": "ScenarioDataCondition",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "scenario_data"
          ]
        },
        "scenario_data": {
          "type": "string",
          "enum": [
            "player_count",
            "investigator",
            "any_resigned",
            "resolution"
          ]
        }
      },
      "required": [
        "type",
        "scenario_data"
      ],
      "additionalProperties": false
    },
    "campaignDataCondition": {
      "$id": "#campaignDataCondition",
      "title": "CampaignDataCondition",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_data"
          ]
        },
        "campaign_data": {
          "type": "string",
          "enum": [
            "difficulty"
          ]
        },
        "scenario": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "campaign_data"
      ],
      "additionalProperties": false
    },
    "campaignDataScenarioCondition": {
      "$id": "#campaignDataScenarioCondition",
      "title": "CampaignDataScenarioCondition",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_data"
          ]
        },
        "campaign_data": {
          "type": "string",
          "enum": [
            "scenario_completed"
          ]
        },
        "scenario": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "campaign_data",
        "scenario"
      ],
      "additionalProperties": false
    },
    "campaignDataChaosBagCondition": {
      "$id": "#campaignDataChaosBagCondition",
      "title": "CampaignDataChaosBagCondition",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_data"
          ]
        },
        "campaign_data": {
          "type": "string",
          "enum": [
            "chaos_bag"
          ]
        },
        "token": {
          "$ref": "types.schema.json#/definitions/chaosToken"
        }
      },
      "required": [
        "type",
        "campaign_data",
        "token"
      ],
      "additionalProperties": false
    },
    "cardCondition": {
      "$id": "#cardCondition",
      "title": "CardCondition",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "has_card"
          ]
        },
        "investigator": {
          "$ref": "types.schema.json#/definitions/investigator"

        },
        "card": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "card"
      ],
      "additionalProperties": false
    },
    "campaignLogCondition": {
      "$id": "#campaignLogCondition",
      "title": "CampaignLogCondition",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_log"
          ]
        },
        "section": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "investigator": {
          "$ref": "types.schema.json#/definitions/investigator"
        }
      },
      "required": [
        "type",
        "section"
      ],
      "additionalProperties": false
    },
    "campaignLogOperand": {
      "$id": "#campaignLogOperand",
      "title": "CampaignLogOperand",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "campaign_log"
          ]
        },
        "section": {
          "type": "string"
        },
        "id": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "section"
      ],
      "additionalProperties": false
    },
    "chaosBagOperand": {
      "$id": "#chaosBagOperand",
      "title": "ChaosBagOperand",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "chaos_bag"
          ]
        },
        "token": {
          "$ref": "types.schema.json#/definitions/chaosToken"
        }
      },
      "required": [
        "type",
        "token"
      ],
      "additionalProperties": false
    },
    "operand": {
      "$id": "#operand",
      "title": "Operand",
      "oneOf": [
        {
          "$ref": "#/definitions/campaignLogOperand"
        },
        {
          "$ref": "#/definitions/chaosBagOperand"
        }
      ]
    },
    "math": {
      "$id": "#math",
      "title": "Math",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "math"
          ]
        },
        "opA": {
          "$ref": "#/definitions/operand"
        },
        "opB": {
          "$ref": "#/definitions/operand"
        },
        "operation": {
          "type": "string",
          "enum": ["compare", "sum"]
        }
      },
      "required": [
        "type",
        "opA",
        "opB",
        "operation"
      ],
      "additionalProperties": false
    },
    "condition": {
      "$id": "#condition",
      "title": "Condition",
      "oneOf": [
        {
          "$ref": "#/definitions/campaignLogCondition"
        },
        {
          "$ref": "#/definitions/math"
        },
        {
          "$ref": "#/definitions/cardCondition"
        },
        {
          "$ref": "#/definitions/campaignDataCondition"
        },
        {
          "$ref": "#/definitions/campaignDataScenarioCondition"
        },
        {
          "$ref": "#/definitions/campaignDataChaosBagCondition"
        },
        {
          "$ref": "#/definitions/scenarioDataCondition"
        },
        {
          "$ref": "#/definitions/traumaCondition"
        }
      ]
    }
  }
}
